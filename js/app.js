// Dom7
var $$ = Dom7;

var infiniteLoading = false;

// Framework7 App main instance
var app  = new Framework7({
  root: '#app', // App root element
  id: 'com.regsploit.app', // App bundle ID
  name: 'RegSploit', // App name
  theme: 'ios', // Automatic theme detection
  statusbar: {
    overlay: "standalone" in window.navigator && window.navigator.standalone && (document.querySelector('meta[name="apple-mobile-web-app-status-bar-style"]').getAttribute('content').indexOf('translucent') >= 0),
  },
  // App routes
  routes: routes,

  view: {
    xhrCache: false,
  },
  on: {
    // each object key means same name event handler
    routerAjaxStart: function (xhr) {
      app.progressbar.show('multi');
    },
    routerAjaxComplete: function (popup) {
      infiniteLoading = false;
      app.progressbar.hide();
    },
    tabShow: function(tab) {
      // $$.ajax({
      //   url: 'https://ignition.fun/statusKKKK.txt',
      //   type: 'GET',
      //   success: function(data) {
      //     $$(".status").text(data);
      //   }
      // });
      app.request.get('https://ignition.fun/statusKKKK.txt', function (data) {
        console.log(data);
        $$(".status").text(data);
      });
    }
  },
});

// Init/Create views
var homeView = app.views.create('#view-home', {
  url: '/'
});